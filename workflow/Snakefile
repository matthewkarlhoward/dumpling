configfile: "config/example.yaml"

experiment = config["experiment"]

def get_ref(wildcards):
    prefix = config["reference"].split(".fasta")[0]
    return prefix

rule all:
  input:
    expand("results/{experiment_name}/gatk/{sample_name}.aaCounts", sample_name=config["samples"], experiment_name=config["experiment"]),
    expand("stats/{experiment_name}/fastqc/{sample_name}_{reads}_fastqc.html", sample_name=config["samples"], reads=["R1", "R2"], experiment_name=config["experiment"]),
    expand("stats/{experiment_name}/fastqc/{sample_name}_{reads}_fastqc.zip", sample_name=config["samples"], reads=["R1", "R2"], experiment_name=config["experiment"])

include: "rules/asm.smk"
include: "rules/filter.smk"
include: "rules/map.smk"
include: "rules/qc.smk"
include: "rules/ref.smk"

#    "stats/multiqc.html"
